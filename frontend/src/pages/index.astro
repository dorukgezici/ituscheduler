---
import ScheduleTable from "@/components/ScheduleTable";
import SupabaseAuth from "@/components/SupabaseAuth";
import { Card, CardContent, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
import Layout from "@/layouts/Layout.astro";

import { serverComponentClient } from "@/lib/supabaseClient";

const supabase = serverComponentClient(Astro.cookies);
const {
  data: { session },
} = await supabase.auth.getSession();
---

<Layout title="ITU Scheduler">
  <main class="container grid place-items-center pb-8 pt-6 md:py-10 gap-24">
    <section class="flex flex-wrap gap-y-10">
      <div class="flex flex-col items-start md:w-2/3 gap-4">
        <h1 class="text-3xl font-extrabold leading-tight tracking-tighter md:text-4xl">Welcome to ITU Scheduler!</h1>
        <p class="md:max-w-[700px] text-lg text-muted-foreground">
          ITUscheduler is an <a href="https://github.com/dorukgezici/ituscheduler-go" target="_blank"> open-source</a>
           web application that allows Istanbul Technical University students to browse up-to-date & detailed
          information about courses and create schedules with ease. It has features like course queries according to
          days, notifying the user if a course is removed from SIS, exporting the schedule and so on. We also have some
          features planned like automatic schedule generation, displaying data from previous years, prerequisite
          checking, etc..
        </p>
      </div>
      <div class="md:w-1/3">
        <Card className="text-center">
          <CardHeader>
            <CardTitle>Login or Register</CardTitle>
          </CardHeader>
          <CardContent className="max-w">
            <SupabaseAuth client:load />
          </CardContent>
          <CardFooter>
            <small class="italic">
              We do not guarantee or can be responsible for the accuracy of information found here. If in doubt, please
              check <a href="https://www.sis.itu.edu.tr" target="_blank" class="underline">SIS</a>.
            </small>
          </CardFooter>
        </Card>
      </div>
    </section>

    <section class="w-full">
      <ScheduleTable client:load />
    </section>
  </main>
</Layout>
